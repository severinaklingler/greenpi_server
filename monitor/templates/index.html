{% extends "base.html" %}
{% load static %}

{% block content %}

<h1 class="cover-heading">Moisture Sensor</h1>
<p class="lead">Make sure your plant has always enough water.</p>
<canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "yesterday", "sensor" : "moisture"}'></canvas>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <script>

    $(function () {
      $('.chart').each(function(i, element) {
        console.log($(element).data("options"));
          $.ajax({
          url: $(element).data("url"),
          data : $(element).data("options"),
          success: function (data) {
            var ctx = element.getContext("2d");
            new Chart(ctx, data);
          }
        });
      });

      // var $populationChart = $("#population-chart");


    });
  </script>

{% endblock %}