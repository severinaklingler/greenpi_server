{% extends "base.html" %}
{% load static %}

{% block content %}

<h1 class="cover-heading">Moisture Sensor</h1>
<p class="lead">Make sure your tree has always enough water.</p>
<div class="container">
  <div class="row">
    <div class="col-sm">
      <h5>Yesterday</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "yesterday", "sensor" : "moisture"}'></canvas>
    </div>
    <div class="col-sm">
      <h5>Today</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "today", "sensor" : "moisture"}'></canvas>
    </div>
  </div>
</div>

<h1 class="cover-heading">Water tank level</h1>
<p class="lead">...</p>
<div class="container">
  <div class="row">
    <div class="col-sm">
      <h5>Yesterday</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "yesterday", "sensor" : "water_tank_level", "color" : "168, 230, 207"}'></canvas>
    </div>
    <div class="col-sm">
      <h5>Today</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "today", "sensor" : "water_tank_level", "color" : "168, 230, 207"}'></canvas>
    </div>
  </div>
</div>

<h1 class="cover-heading">Temperature</h1>
<p class="lead">...</p>
<div class="container"> 
  <div class="row">
    <div class="col-sm">
      <h5>Yesterday</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "yesterday", "sensor" : "temperature", "color" : "255, 170, 165"}}'></canvas>
    </div>
    <div class="col-sm">
      <h5>Today</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "today", "sensor" : "temperature", "color" : "255, 170, 165"}'></canvas>
    </div>
  </div>
</div>

<h1 class="cover-heading">Humidity</h1>
<p class="lead">...</p>
<div class="container">
  <div class="row">
    <div class="col-sm">
      <h5>Yesterday</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "yesterday", "sensor" : "humidity", "color" : "168, 230, 207"}'></canvas>
    </div>
    <div class="col-sm">
      <h5>Today</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "today", "sensor" : "humidity", "color" : "168, 230, 207"}'></canvas>
    </div>
  </div>
</div>

<h1 class="cover-heading">Weight</h1>
<p class="lead">...</p>
<div class="container">
  <div class="row">
    <div class="col-sm">
      <h5>Yesterday</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "yesterday", "sensor" : "weigth", "color" : "246, 245, 120"}'></canvas>
    </div>
    <div class="col-sm">
      <h5>Today</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "today", "sensor" : "weigth", "color" : "246, 245, 120"}'></canvas>
    </div>
  </div>
</div>



<h2 class="cover-heading">Test Sensor</h2>
<p class="lead">To test integrations</p>
<div class="container">
  <div class="row">
    <div class="col-sm">
      <h5>Today</h5>
      <canvas class="chart" data-url="{% url 'chart' %}" data-options='{"time_range": "today", "sensor" : "test"}'></canvas>
    </div>
    <div class="col-sm"></div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <script>

    $(function () {
      $('.chart').each(function(i, element) {
        console.log($(element).data("options"));
          $.ajax({
          url: $(element).data("url"),
          data : $(element).data("options"),
          success: function (data) {
            var ctx = element.getContext("2d");
            new Chart(ctx, data);
          }
        });
      });

      // var $populationChart = $("#population-chart");


    });
  </script>

{% endblock %}